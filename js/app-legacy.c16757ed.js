(function(){"use strict";var t={6391:function(t,e,n){n(6992),n(8674),n(9601),n(7727);var s=n(8935),r=n(150),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},i=[],o=n(1001),u={},c=(0,o.Z)(u,a,i,!1,null,null,null),l=c.exports,d=n(2809),f=n(7906),p=n(6198),m=(n(8309),n(4665)),h=n(3445),v=(n(2222),n(6166)),g=n.n(v),w="http".concat("s","://").concat("lol.stupidfru.it","/api");function b(t){return g().post("".concat(w,"/login"),t)}function C(t){return _.apply(this,arguments)}function _(){return _=(0,p.Z)((0,f.Z)().mark((function t(e){return(0,f.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",g().get("".concat(w,"/entries"),{headers:{Authorization:"RAF ".concat(e)}}));case 1:case"end":return t.stop()}}),t)}))),_.apply(this,arguments)}n(4916),n(3123),n(5505),n(7714),n(2801),n(1174);var y=new s["default"];function $(t){if(!t||t.split(".").length<3)return!1;var e=JSON.parse(atob(t.split(".")[1])),n=new Date(1e3*e.exp),s=new Date;return s<n}s["default"].use(m.ZP);var x={entries:[],user:"",jwt:""},k={login:function(t,e){return(0,p.Z)((0,f.Z)().mark((function n(){return(0,f.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.commit("setUserInfo",{userData:e}),n.abrupt("return",b(e).then((function(e){t.commit("setJwtToken",{jwt:e.data}),t.commit("setUserData",{data:e.data})})).catch((function(t){console.log("Error Authenticating: ",t),y.$emit("failedAuthentication",t)})));case 2:case"end":return n.stop()}}),n)})))()},getUserEntries:function(t){return C(t.state.jwt.token)}},Z={setUserInfo:function(t,e){t.user=e.userData.name},setJwtToken:function(t,e){t.jwt=e.jwt.token},setUserData:function(t,e){t.userid=e.data.userid}},P={isAuthenticated:function(t){return $(t.jwt)},userInfo:function(t){return t.user},userId:function(t){return t.userid},userToken:function(t){return t.jwt}},j=new m.ZP.Store({state:x,actions:k,mutations:Z,getters:P,plugins:[(0,h.Z)()]}),O=j,M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("layout-default",[n("div",{staticClass:"container"},[n("div",{staticClass:"hero"},[t.isAuthenticated?n("div",[t._v(" Hi "+t._s(t.username)+" ")]):t._e()]),n("b-container",[n("b-row",t._l(t.userEntries,(function(e){return n("b-card-group",{key:e.id,staticClass:"col-md-2 col-sm-6",attrs:{deck:""}},[n("b-card",{staticClass:"mb-2",staticStyle:{"max-width":"15rem"},attrs:{"sub-title":e.maker_name}},[n("b-card-text",[t._v(" "+t._s(t._f("moment")(e.epoch,"MM-DD-YYYY"))+" ")]),n("b-card-text",[n("a",{attrs:{href:e.raffle_link}},[t._v(t._s(e.notes))])])],1)],1)})),1)],1)],1)])},E=[],A={name:"HomeView",components:{},data:function(){return{username:this.$store.getters.userInfo,userid:this.$store.getters.userId,userEntries:""}},ready:function(){this.created()},created:function(){var t=this;return(0,p.Z)((0,f.Z)().mark((function e(){return(0,f.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,C(t.$store.getters.userToken);case 2:t.userEntries=e.sent.data.data;case 3:case"end":return e.stop()}}),e)})))()},computed:{isAuthenticated:function(){return this.$store.getters.isAuthenticated}},methods:{}},D=A,R=(0,o.Z)(D,M,E,!1,null,null,null),T=R.exports,S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("section",{staticClass:"hero is-primary"},[n("div",{staticClass:"hero-body"},[n("div",{staticClass:"container has-text-centered"},[n("h2",{staticClass:"title"},[t._v("Login")]),n("p",{staticClass:"subtitle error-msg"},[t._v(t._s(t.errorMsg))])])])]),n("section",{staticClass:"section"},[n("div",{staticClass:"container"},[n("div",{staticClass:"field"},[n("label",{staticClass:"label is-large",attrs:{for:"name"}},[t._v("Username: "),n("div",{staticClass:"control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"input is-large",attrs:{type:"name",id:"name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})])])]),n("div",{staticClass:"field"},[n("label",{staticClass:"label is-large",attrs:{for:"password"}},[t._v("Password: "),n("div",{staticClass:"control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input is-large",attrs:{type:"password",id:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})])])]),n("div",{staticClass:"control"},[n("button",{staticClass:"button is-primary",on:{click:t.authenticate}},[t._v("Login")]),n("a",{staticClass:"button is-success",attrs:{onKeyPress:"register"}},[t._v("Register")])])])])])},V=[],U={name:"LoginView",data:function(){return{name:"",password:"",errorMsg:""}},methods:{authenticate:function(){var t=this;this.$store.dispatch("login",{name:this.name,password:this.password}).then((function(){return t.$router.push("/").catch((function(){}))}))},register:function(){var t=this;this.$store.dispatch("register",{name:this.name,password:this.password}).then((function(){return t.$router.push("/login")}))}},mounted:function(){var t=this;y.$on("failedRegistering",(function(e){t.errorMsg=e}))},beforeDestroy:function(){y.$off("failedRegistering"),y.$off("failedAuthentication")}},I=U,L=(0,o.Z)(I,S,V,!1,null,null,null),N=L.exports,Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("section",{staticClass:"hero is-primary"},[n("div",{staticClass:"hero-body"},[n("div",{staticClass:"container has-text-centered"},[n("h2",{staticClass:"title"},[t._v("Register")]),n("p",{staticClass:"subtitle error-msg"},[t._v(t._s(t.errorMsg))])])])]),n("section",{staticClass:"section"},[n("div",{staticClass:"container"},[n("div",{staticClass:"field"},[n("label",{staticClass:"label is-large",attrs:{for:"name"}},[t._v("Username: "),n("div",{staticClass:"control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"input is-large",attrs:{type:"name",id:"name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})])])]),n("div",{staticClass:"field"},[n("label",{staticClass:"label is-large",attrs:{for:"password"}},[t._v("Password: "),n("div",{staticClass:"control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input is-large",attrs:{type:"password",id:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})])])]),n("div",{staticClass:"control"},[n("button",{staticClass:"button is-primary",on:{click:t.register}},[t._v("Login")]),n("a",{staticClass:"button is-success",attrs:{onKeyPress:"register"}},[t._v("Register")])])])])])},H=[],J={name:"LoginView",data:function(){return{name:"",password:"",errorMsg:""}},methods:{authenticate:function(){var t=this;this.$store.dispatch("login",{name:this.name,password:this.password}).then((function(){return t.$router.push("/").catch((function(){}))}))},register:function(){var t=this;this.$store.dispatch("register",{name:this.name,password:this.password}).then((function(){return t.$router.push("/login")}))}},mounted:function(){var t=this;y.$on("failedRegistering",(function(e){t.errorMsg=e}))},beforeDestroy:function(){y.$off("failedRegistering"),y.$off("failedAuthentication")}},F=J,K=(0,o.Z)(F,Y,H,!1,null,null,null),z=K.exports,G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("button",{staticClass:"btn btn-primary",attrs:{type:"button"}},[t._v(t._s(t.msg))])])},X=[],q={name:"PingView",data:function(){return{msg:""}},methods:{getMessage:function(){var t=this,e="http://localhost:5000/api/ping";g().get(e).then((function(e){t.msg=e.data})).catch((function(t){console.error(t)}))}},created:function(){this.getMessage()}},B=q,Q=(0,o.Z)(B,G,X,!1,null,null,null),W=Q.exports;s["default"].use(d.Z);var tt=new d.Z({mode:"history",base:"/raffle-entries-vue/",routes:[{path:"/",name:"HomeView",component:T,beforeEnter:function(t,e,n){O.getters.isAuthenticated?n():n("/login")}},{path:"/login",name:"LoginView",component:N},{path:"/register",name:"RegisterView",component:z},{path:"/ping",name:"PingView",component:W}]});n(44);s["default"].config.productionTip=!1,s["default"].use(r.XG7),s["default"].use(n(2664)),new s["default"]({router:tt,store:O,render:function(t){return t(l)}}).$mount("#app")}},e={};function n(s){var r=e[s];if(void 0!==r)return r.exports;var a=e[s]={exports:{}};return t[s].call(a.exports,a,a.exports,n),a.exports}n.m=t,function(){var t=[];n.O=function(e,s,r,a){if(!s){var i=1/0;for(l=0;l<t.length;l++){s=t[l][0],r=t[l][1],a=t[l][2];for(var o=!0,u=0;u<s.length;u++)(!1&a||i>=a)&&Object.keys(n.O).every((function(t){return n.O[t](s[u])}))?s.splice(u--,1):(o=!1,a<i&&(i=a));if(o){t.splice(l--,1);var c=r();void 0!==c&&(e=c)}}return e}a=a||0;for(var l=t.length;l>0&&t[l-1][2]>a;l--)t[l]=t[l-1];t[l]=[s,r,a]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,s){var r,a,i=s[0],o=s[1],u=s[2],c=0;if(i.some((function(e){return 0!==t[e]}))){for(r in o)n.o(o,r)&&(n.m[r]=o[r]);if(u)var l=u(n)}for(e&&e(s);c<i.length;c++)a=i[c],n.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return n.O(l)},s=self["webpackChunkclient"]=self["webpackChunkclient"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=n.O(void 0,[998],(function(){return n(6391)}));s=n.O(s)})();
//# sourceMappingURL=app-legacy.c16757ed.js.map